{"version":3,"file":"js/auth.96a40cf3.js","mappings":"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","sources":["webpack://board-project/./src/apis/auth.js","webpack://board-project/./src/components/ModalDialogTemplate.vue","webpack://board-project/./src/components/ModalDialogTemplate.vue?7bb0","webpack://board-project/./src/components/AlertDialog.vue","webpack://board-project/./src/views/auth/Join.vue","webpack://board-project/./src/views/auth/Join.vue?cc11","webpack://board-project/./src/views/auth/Login.vue","webpack://board-project/./src/views/auth/Login.vue?930c"],"sourcesContent":["import axios from \"axios\";\nimport store from \"@/store\";\n\nasync function join(user) {\n  try {\n    const response = await axios.post(\"/member/join\", {\n      mid: user.id,\n      mname: user.name,\n      mpassword: user.password,\n      mrole: user.role,\n      memail: user.email,\n    });\n    return response.data.result; //success, duplicate, fail 중 하나가 리턴됨\n  } catch (error) {\n    console.log(error);\n    return \"fail-network\";\n  }\n}\n\nasync function login(user) {\n  try {\n    const response = await axios.post(\"/member/login\", {\n      mid: user.id,\n      mpassword: user.password,\n    });\n    store.dispatch(\"saveAuth\", { userId: response.data.mid, authToken: response.data.accessToken });\n    return \"success\";\n  } catch (error) {\n    if (error.response) {\n      if (error.response.status === 401) {\n        return \"fail-401\";\n      }\n    } else {\n      return \"fail-network\";\n    }\n  }\n}\n\nasync function logout() {\n  try {\n    await axios.get(\"/member/logout\");\n    store.dispatch(\"deleteAuth\");\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function refreshToken() {\n  try {\n    if(store.state.authToken !== \"\") {\n      const response = await axios.get(\"/member/refreshToken\");\n      store.dispatch(\"saveAuth\", {\n        userId: response.data.mid,\n        authToken: response.data.accessToken\n      });\n      return true;\n    }\n  } catch(error) {\n    console.log(error);\n  }\n  return false;\n}\n\nexport default {\n  join,\n  login,\n  logout,\n  refreshToken\n};\n","<template>\n    <Transition name=\"modal\">\n        <div class=\"modal-mask\">\n            <div class=\"modal-wrapper\">\n                <div class=\"modal-container\" :style=\"$attrs.style\">\n                    <div class=\"modal-header\">\n                        <slot name=\"header\">default header</slot>\n                    </div>\n\n                    <div class=\"modal-body\">\n                        <slot name=\"body\">default body</slot>\n                    </div>\n\n                    <div class=\"modal-footer\">\n                        <slot name=\"footer\">\n                            default footer\n                            <button class=\"modal-default-button\" @click=\"$emit('close')\">OK</button>\n                        </slot>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </Transition>\n</template>\n\n<script>\n export default {\n     inheritAttrs: false\n }\n</script>\n\n<script setup></script>\n\n<style scoped>\n.modal-mask {\n    position: fixed;\n    z-index: 9998;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: table;\n    transition: opacity 0.3s ease;\n}\n\n.modal-wrapper {\n    display: table-cell;\n    vertical-align: middle;\n}\n\n.modal-container {\n    width: 300px;\n    margin: 0px auto;\n    padding: 20px 30px;\n    background-color: #fff;\n    border-radius: 2px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n    transition: all 0.3s ease;\n}\n\n.modal-header h3 {\n  width: 100%;\n}\n\n.modal-body {\n    margin: 20px 0;\n}\n\n.modal-default-button {\n    float: right;\n}\n\n/*\n * The following styles are auto-applied to elements with\n * transition=\"modal\" when their visibility is toggled\n * by Vue.js.\n *\n * You can easily play with the modal transition by editing\n * these styles.\n */\n\n.modal-enter-from {\n    opacity: 0;\n}\n\n.modal-leave-to {\n    opacity: 0;\n}\n\n.modal-enter-from .modal-container,\n.modal-leave-to .modal-container {\n    -webkit-transform: scale(1.1);\n    transform: scale(1.1);\n}\n</style>\n","import { render } from \"./ModalDialogTemplate.vue?vue&type=template&id=c0d5047c&scoped=true\"\nimport script from \"./ModalDialogTemplate.vue?vue&type=script&lang=js\"\nexport * from \"./ModalDialogTemplate.vue?vue&type=script&lang=js\"\n\nimport \"./ModalDialogTemplate.vue?vue&type=style&index=0&id=c0d5047c&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/kim-yewon/photo-album/photo-album/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c0d5047c\"]])\n\nexport default __exports__","import script from \"./AlertDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AlertDialog.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div>\n    <div>\n      <div class=\"form\">\n        <div class=\"logintitle\">회원가입</div>\n        <div>\n          <input type=\"text\" class=\"form-control\" id=\"userId\" placeholder=\"아이디\" v-model=\"user.id\" />\n          <input type=\"password\" class=\"form-control\" placeholder=\"비밀번호\" v-model=\"user.password\" />\n          <input type=\"text\" class=\"form-control\" placeholder=\"이름\" v-model=\"user.name\" />\n          <input type=\"text\" class=\"form-control\" placeholder=\"이메일\" v-model=\"user.email\" />\n\n          <!-- <c:if test=\"${error != null}\">\n            <small style=\"color: red\" id=\"loginError\">${error}</small>\n          </c:if> -->\n          <button class=\"joinbutton\" @click=\"handleJoin\">회원가입</button>\n        </div>\n      </div>\n      <AlertDialog v-if=\"alertDialog\" :message=\"alertDialogMessage\" :loading=\"loading\" @close=\"alertDialog = false\" />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from \"vue\";\nimport auth from \"@/apis/auth\";\nimport AlertDialog from \"@/components/AlertDialog.vue\";\n\nconst alertDialog = ref(false);\nconst alertDialogMessage = ref(\"\");\nconst loading = ref(false);\n\nconst user = reactive({\n  id: \"user\",\n  password: \"12345\",\n  name: \"사용자\",\n  email: \"user@mycompany.com\",\n});\n\nasync function handleJoin() {\n  alertDialog.value = true;\n  loading.value = true;\n\n  const result = await auth.join(user);\n  if (result === \"success\") {\n    alertDialogMessage.value = \"회원 가입 성공\";\n  } else if (result === \"duplicated\") {\n    alertDialogMessage.value = \"회원 가입 실패 : 아이디 중복\";\n  } else if (result === \"fail\") {\n    alertDialogMessage.value = \"회원 가입 성공 : 서버측 오류\";\n  } else {\n    alertDialogMessage.value = \"회원 가입 성공 : 네트워크 오류\";\n  }\n\n  loading.value = false;\n}\n</script>\n\n<style scoped>\n.form {\n  /* position: relative; */\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 1em;\n  width: 28em;\n  padding: 1.5em;\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n\n.logintitle {\n  text-align: center;\n  font-size: 2.5em;\n  font-weight: 400;\n}\n\n.form-control {\n  height: 2.5em;\n  box-sizing: border-box;\n  border-style: none;\n  border: 0.08em solid rgb(72, 72, 72);\n  font-size: 1.1em;\n  margin: 1em 0;\n}\n\n.joinbutton {\n  border: none;\n  color: black;\n  width: 100%;\n  height: 2.5em;\n  font-size: 1.2em;\n  border-radius: 0.5em;\n  cursor: pointer;\n}\n</style>\n","import script from \"./Join.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Join.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Join.vue?vue&type=style&index=0&id=839bf3fc&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/kim-yewon/photo-album/photo-album/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-839bf3fc\"]])\n\nexport default __exports__","<template>\n  <div>\n    <div>\n      <div>\n        <form class=\"form\" method=\"post\" action=\"${pageContext.request.contextPath}/user/login\">\n          <div class=\"logintitle\">로그인</div>\n          <div>\n            <input type=\"text\" class=\"form-control\" id=\"userId\" placeholder=\"아이디\" v-model=\"user.id\" />\n            <input type=\"password\" class=\"form-control\" placeholder=\"비밀번호\" v-model=\"user.password\" />\n\n            <!-- <c:if test=\"${error != null}\">\n              <small style=\"color: red\" id=\"loginError\">${error}</small>\n            </c:if> -->\n            <button class=\"loginbutton\" @click=\"handleLogin\">로그인</button>\n          </div>\n        </form>\n      </div>\n      <AlertDialog v-if=\"alertDialog\" :message=\"alertDialogMessage\" :loading=\"loading\" @close=\"alertDialog = false\" />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from \"vue\";\nimport apiAuth from \"@/apis/auth\";\nimport AlertDialog from \"@/components/AlertDialog.vue\";\n\nconst alertDialog = ref(false);\nconst alertDialogMessage = ref(\"\");\nconst loading = ref(false);\n\nconst user = reactive ({\n  id: \"user\",\n  password: \"12345\"\n});\n\nasync function handleLogin() {\n  alertDialog.value = true;\n  loading.value = true;\n\n  const result = await apiAuth.login(user);\n\n  if (result === \"success\") {\n    alertDialog.value = false;\n  } else if (result === \"fail-401\") {\n    alertDialogMessage.value = \"로그인 실패: 아이디 또는 패스워드가 일치하지 않습니다\";\n  } else {\n    alertDialogMessage.value = \"로그인 실패: 네트워크 에러\";\n  }\n\n  loading.value = false;\n}\n</script>\n\n<style scoped>\n.form {\n  /* position: relative; */\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 1em;\n  width: 28em;\n  padding: 1.5em;\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n\n.logintitle {\n  text-align: center;\n  font-size: 2.5em;\n  font-weight: 400;\n}\n\n.form-control {\n  height: 2.5em;\n  box-sizing: border-box;\n  border-style: none;\n  border: 0.08em solid rgb(72, 72, 72);\n  font-size: 1.1em;\n  margin: 1em 0;\n}\n\n.loginbutton {\n  border: none;\n  color: black;\n  width: 100%;\n  height: 2.5em;\n  font-size: 1.2em;\n  border-radius: 0.5em;\n  cursor: pointer;\n}\n</style>\n","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=146b2ca1&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/kim-yewon/photo-album/photo-album/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-146b2ca1\"]])\n\nexport default __exports__"],"names":["async","join","user","response","axios","mid","id","mname","name","mpassword","password","mrole","role","memail","email","data","result","error","console","log","login","store","userId","authToken","accessToken","status","logout","refreshToken","class","_createBlock","_Transition","_createElementVNode","style","_ctx","_renderSlot","onClick","inheritAttrs","__exports__","render","alertDialog","ref","alertDialogMessage","loading","reactive","handleJoin","value","auth","handleLogin","apiAuth"],"sourceRoot":""}