"use strict";(self["webpackChunkboard_project"]=self["webpackChunkboard_project"]||[]).push([[818],{9707:function(e,a,o){var t=o(6265),s=o.n(t),n=o(8830);async function l(e){try{const a=await s().post("/member/join",{mid:e.id,mname:e.name,mpassword:e.password,mrole:e.role,memail:e.email});return a.data.result}catch(a){return console.log(a),"fail-network"}}async function r(e){try{const a=await s().post("/member/login",{mid:e.id,mpassword:e.password});return n.Z.dispatch("saveAuth",{userId:a.data.mid,authToken:a.data.accessToken}),"success"}catch(a){if(!a.response)return"fail-network";if(401===a.response.status)return"fail-401"}}async function d(){try{await s().get("/member/logout"),n.Z.dispatch("deleteAuth")}catch(e){console.log(e)}}async function i(){try{if(""!==n.Z.state.authToken){const e=await s().get("/member/refreshToken");return n.Z.dispatch("saveAuth",{userId:e.data.mid,authToken:e.data.accessToken}),!0}}catch(e){console.log(e)}return!1}a["Z"]={join:l,login:r,logout:d,refreshToken:i}},4160:function(e,a,o){o.d(a,{Z:function(){return I}});var t=o(3396),s=o(7139),n=o(9242);const l={class:"modal-mask"},r={class:"modal-wrapper"},d={class:"modal-header"},i=(0,t.Uk)("default header"),c={class:"modal-body"},u=(0,t.Uk)("default body"),m={class:"modal-footer"},p=(0,t.Uk)(" default footer ");function v(e,a,o,v,f,w){return(0,t.wg)(),(0,t.j4)(n.uT,{name:"modal"},{default:(0,t.w5)((()=>[(0,t._)("div",l,[(0,t._)("div",r,[(0,t._)("div",{class:"modal-container",style:(0,s.j5)(e.$attrs.style)},[(0,t._)("div",d,[(0,t.WI)(e.$slots,"header",{},(()=>[i]),!0)]),(0,t._)("div",c,[(0,t.WI)(e.$slots,"body",{},(()=>[u]),!0)]),(0,t._)("div",m,[(0,t.WI)(e.$slots,"footer",{},(()=>[p,(0,t._)("button",{class:"modal-default-button",onClick:a[0]||(a[0]=a=>e.$emit("close"))},"OK")]),!0)])],4)])])])),_:3})}var f={inheritAttrs:!1},w=o(89);const g=(0,w.Z)(f,[["render",v],["__scopeId","data-v-c0d5047c"]]);var y=g;const _=(0,t.Uk)(" 알림 "),h={key:0,class:"mt-3"},k=(0,t._)("div",{class:"spinner-border text-secondary",role:"status"},[(0,t._)("span",{class:"sr-only"},"Loading...")],-1),b=[k],j={key:1};var Z={name:"AlertDialog",props:["message","loading"],setup(e){return(a,o)=>((0,t.wg)(),(0,t.j4)(y,{style:{width:"400px"}},{header:(0,t.w5)((()=>[_])),body:(0,t.w5)((()=>[e.loading?((0,t.wg)(),(0,t.iD)("div",h,b)):(0,t.kq)("",!0),e.loading?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",j,(0,s.zw)(e.message),1))])),footer:(0,t.w5)((()=>[(0,t._)("button",{class:"btn",onClick:o[0]||(o[0]=e=>a.$emit("close"))},"닫기")])),_:1}))}};const C=Z;var I=C},3714:function(e,a,o){o.r(a),o.d(a,{default:function(){return v}});var t=o(3396),s=o(9242),n=o(4870),l=o(9707),r=o(4160);const d=e=>((0,t.dD)("data-v-839bf3fc"),e=e(),(0,t.Cn)(),e),i={class:"form"},c=d((()=>(0,t._)("div",{class:"logintitle"},"회원가입",-1)));var u={name:"Join",setup(e){const a=(0,n.iH)(!1),o=(0,n.iH)(""),d=(0,n.iH)(!1),u=(0,n.qj)({id:"user",password:"12345",name:"사용자",email:"user@mycompany.com"});async function m(){a.value=!0,d.value=!0;const e=await l.Z.join(u);o.value="success"===e?"회원 가입 성공":"duplicated"===e?"회원 가입 실패 : 아이디 중복":"fail"===e?"회원 가입 성공 : 서버측 오류":"회원 가입 성공 : 네트워크 오류",d.value=!1}return(e,n)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",null,[(0,t._)("div",i,[c,(0,t._)("div",null,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"userId",placeholder:"아이디","onUpdate:modelValue":n[0]||(n[0]=e=>u.id=e)},null,512),[[s.nr,u.id]]),(0,t.wy)((0,t._)("input",{type:"password",class:"form-control",placeholder:"비밀번호","onUpdate:modelValue":n[1]||(n[1]=e=>u.password=e)},null,512),[[s.nr,u.password]]),(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"이름","onUpdate:modelValue":n[2]||(n[2]=e=>u.name=e)},null,512),[[s.nr,u.name]]),(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",placeholder:"이메일","onUpdate:modelValue":n[3]||(n[3]=e=>u.email=e)},null,512),[[s.nr,u.email]]),(0,t._)("button",{class:"joinbutton",onClick:m},"회원가입")])]),a.value?((0,t.wg)(),(0,t.j4)(r.Z,{key:0,message:o.value,loading:d.value,onClose:n[4]||(n[4]=e=>a.value=!1)},null,8,["message","loading"])):(0,t.kq)("",!0)])]))}},m=o(89);const p=(0,m.Z)(u,[["__scopeId","data-v-839bf3fc"]]);var v=p},1642:function(e,a,o){o.r(a),o.d(a,{default:function(){return v}});var t=o(3396),s=o(9242),n=o(4870),l=o(9707),r=o(4160);const d=e=>((0,t.dD)("data-v-146b2ca1"),e=e(),(0,t.Cn)(),e),i={class:"form",method:"post",action:"${pageContext.request.contextPath}/user/login"},c=d((()=>(0,t._)("div",{class:"logintitle"},"로그인",-1)));var u={name:"Login",setup(e){const a=(0,n.iH)(!1),o=(0,n.iH)(""),d=(0,n.iH)(!1),u=(0,n.qj)({id:"user",password:"12345"});async function m(){a.value=!0,d.value=!0;const e=await l.Z.login(u);"success"===e?a.value=!1:o.value="fail-401"===e?"로그인 실패: 아이디 또는 패스워드가 일치하지 않습니다":"로그인 실패: 네트워크 에러",d.value=!1}return(e,n)=>((0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",null,[(0,t._)("div",null,[(0,t._)("form",i,[c,(0,t._)("div",null,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control",id:"userId",placeholder:"아이디","onUpdate:modelValue":n[0]||(n[0]=e=>u.id=e)},null,512),[[s.nr,u.id]]),(0,t.wy)((0,t._)("input",{type:"password",class:"form-control",placeholder:"비밀번호","onUpdate:modelValue":n[1]||(n[1]=e=>u.password=e)},null,512),[[s.nr,u.password]]),(0,t._)("button",{class:"loginbutton",onClick:m},"로그인")])])]),a.value?((0,t.wg)(),(0,t.j4)(r.Z,{key:0,message:o.value,loading:d.value,onClose:n[2]||(n[2]=e=>a.value=!1)},null,8,["message","loading"])):(0,t.kq)("",!0)])]))}},m=o(89);const p=(0,m.Z)(u,[["__scopeId","data-v-146b2ca1"]]);var v=p}}]);
//# sourceMappingURL=auth.96a40cf3.js.map