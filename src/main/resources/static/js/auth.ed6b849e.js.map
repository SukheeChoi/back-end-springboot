{"version":3,"file":"js/auth.ed6b849e.js","mappings":"uMA4CWA,MAAM,Q,GACTC,EAAAA,EAAAA,GAAiC,OAA5BD,MAAM,cAAa,OAAG,G,kEAHjCE,EAAAA,EAAAA,IAkBM,aAjBJD,EAAAA,EAAAA,GAgBM,aAfJA,EAAAA,EAAAA,GAaM,MAbN,EAaM,CAZJE,GACAF,EAAAA,EAAAA,GAUM,sBATJA,EAAAA,EAAAA,GAA0F,SAAnFG,KAAK,OAAOJ,MAAM,eAAeK,GAAG,SAASC,YAAY,M,qCAAeC,EAAAA,KAAKF,GAAEG,IAAtF,iBAA+ED,EAAAA,KAAKF,OAShF,SARJJ,EAAAA,EAAAA,GAAyF,SAAlFG,KAAK,WAAWJ,MAAM,eAAeM,YAAY,O,qCAAgBC,EAAAA,KAAKE,SAAQD,IAArF,iBAAwED,EAAAA,KAAKE,aAQzE,SAPJR,EAAAA,EAAAA,GAAyF,SAAlFG,KAAK,OAAOJ,MAAM,eAAeK,GAAG,SAASC,YAAY,K,qCAAcC,EAAAA,KAAKF,GAAEG,IAArF,iBAA8ED,EAAAA,KAAKF,OAO/E,SANJJ,EAAAA,EAAAA,GAA0F,SAAnFG,KAAK,OAAOJ,MAAM,eAAeK,GAAG,SAASC,YAAY,M,qCAAeC,EAAAA,KAAKF,GAAEG,IAAtF,iBAA+ED,EAAAA,KAAKF,OAKpFJ,EAAAA,EAAAA,GAA6D,UAArDD,MAAM,cAAeU,QAAK,oBAAEH,EAAAA,aAAAA,EAAAA,eAAAA,KAAa,WAGlCA,EAAAA,cAAAA,EAAAA,EAAAA,OAAnBI,EAAAA,EAAAA,IAAgHC,EAAA,C,MAA/EC,QAASN,EAAAA,mBAAqBO,QAASP,EAAAA,QAAUQ,QAAK,eAAER,EAAAA,aAAW,IAApG,mD,YCzDN,MAAMS,EAAS,GAGTC,GAA2B,OAAgBD,EAAQ,CAAC,CAAC,SAASE,KAEpE,S,oHCyDA,I,mBC7DalB,MAAM,c,GACFA,MAAM,iB,GAEEA,MAAM,gB,WACa,kB,GAGnBA,MAAM,c,WACW,gB,GAGjBA,MAAM,gB,WACa,oB,0CAbxCW,EAAAA,EAAAA,IAqBaQ,EAAAA,GAAA,CArBDC,KAAK,SAAO,C,kBACpB,IAmBM,EAnBNnB,EAAAA,EAAAA,GAmBM,MAnBN,EAmBM,EAlBFA,EAAAA,EAAAA,GAiBM,MAjBN,EAiBM,EAhBFA,EAAAA,EAAAA,GAeM,OAfDD,MAAM,kBAAmBqB,OAAK,QAAEd,EAAAA,OAAOc,QAA5C,EACIpB,EAAAA,EAAAA,GAEM,MAFN,EAEM,EADFqB,EAAAA,EAAAA,IAAyCf,EAAAA,OAAA,aAAzC,IAAyC,MAAzC,MAGJN,EAAAA,EAAAA,GAEM,MAFN,EAEM,EADFqB,EAAAA,EAAAA,IAAqCf,EAAAA,OAAA,WAArC,IAAqC,MAArC,MAGJN,EAAAA,EAAAA,GAKM,MALN,EAKM,EAJFqB,EAAAA,EAAAA,IAGOf,EAAAA,OAAA,aAHP,IAGO,IADHN,EAAAA,EAAAA,GAAwE,UAAhED,MAAM,uBAAwBU,QAAK,eAAEH,EAAAA,MAAK,WAAW,SAFjE,MAVR,U,MAsBf,OACIgB,cAAc,G,QCpBnB,MAAMN,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,Q,mmBCNA,MAAM,EAAc,EAEpB,Q,uOCsBA,MAAMM,GAAcC,EAAAA,EAAAA,KAAI,GAClBC,GAAqBD,EAAAA,EAAAA,IAAI,IACzBX,GAAUW,EAAAA,EAAAA,KAAI,GAEdE,GAAOC,EAAAA,EAAAA,IAAU,CACrBvB,GAAI,OACJI,SAAU,U,utBC3BZ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE","sources":["webpack://board-project/./src/views/auth/Join.vue","webpack://board-project/./src/views/auth/Join.vue?cc11","webpack://board-project/./src/apis/auth.js","webpack://board-project/./src/components/ModalDialogTemplate.vue","webpack://board-project/./src/components/ModalDialogTemplate.vue?7bb0","webpack://board-project/./src/components/AlertDialog.vue","webpack://board-project/./src/views/auth/Login.vue","webpack://board-project/./src/views/auth/Login.vue?930c"],"sourcesContent":["<!-- <template>\n  <div class=\"card\">\n    <div class=\"card-header\">Join</div>\n    <div class=\"card-body\">\n      <div class=\"form-group\">\n        <label class=\"form-label\">User ID</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"user.id\" />\n      </div>\n      <div class=\"form-group\">\n        <label class=\"form-label\">User Name</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"user.name\" />\n      </div>\n      <div class=\"form-group\">\n        <label class=\"col-form-label\">User Password</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"user.password\" />\n      </div>\n      <div class=\"form-group\">\n        <label class=\"col-form-label\">User Role</label>\n        <select class=\"form-control\" name=\"mrole\" v-model=\"user.role\">\n          <option value=\"ROLE_ADMIN\">ROLE_ADMIN</option>\n          <option value=\"ROLE_MANAGER\">ROLE_MANAGER</option>\n          <option value=\"ROLE_USER\" selected>ROLE_USER</option>\n        </select>\n      </div>\n      <div class=\"form-group\">\n        <label class=\"col-form-label\">User Email</label>\n        <input type=\"text\" class=\"form-control\" v-model=\"user.email\" />\n      </div>\n      <button class=\"btn btn-info btn-sm\" v-on:click=\"handleJoin()\">가입</button>\n    </div>\n  </div>\n</template>\n\n<script setup>\n\n</script>\n\n<style scoped>\n\n</style> -->\n\n<template>\n  <div>\n    <div>\n      <div class=\"form\">\n        <div class=\"logintitle\">로그인</div>\n        <div>\n          <input type=\"text\" class=\"form-control\" id=\"userId\" placeholder=\"아이디\" v-model=\"user.id\" />\n          <input type=\"password\" class=\"form-control\" placeholder=\"비밀번호\" v-model=\"user.password\" />\n          <input type=\"text\" class=\"form-control\" id=\"userId\" placeholder=\"이름\" v-model=\"user.id\" />\n          <input type=\"text\" class=\"form-control\" id=\"userId\" placeholder=\"이메일\" v-model=\"user.id\" />\n\n          <!-- <c:if test=\"${error != null}\">\n              <small style=\"color: red\" id=\"loginError\">${error}</small>\n            </c:if> -->\n          <button class=\"loginbutton\" @click=\"handlelogin\">로그인</button>\n        </div>\n      </div>\n      <AlertDialog v-if=\"alertDialog\" :message=\"alertDialogMessage\" :loading=\"loading\" @close=\"alertDialog = false\" />\n    </div>\n  </div>\n</template>\n\n<script setup></script>\n\n<style scoped></style>\n","import { render } from \"./Join.vue?vue&type=template&id=e78cd114\"\nconst script = {}\n\nimport exportComponent from \"/Users/kim-yewon/photo-album/photo-album/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import axios from \"axios\";\nimport store from \"@/store\";\n\nasync function join(user) {\n  try {\n    const response = await axios.post(\"/member/join\", {\n      mid: user.id,\n      mname: user.name,\n      mpassword: user.password,\n      mrole: user.role,\n      memail: user.email,\n    });\n    return response.data.result; //success, duplicate, fail 중 하나가 리턴됨\n  } catch (error) {\n    console.log(error);\n    return \"fail-network\";\n  }\n}\n\nasync function login(user) {\n  try {\n    const response = await axios.post(\"/member/login\", {\n      mid: user.id,\n      mpassword: user.password,\n    });\n    store.dispatch(\"saveAuth\", { userId: response.data.mid, authToken: response.data.accessToken });\n    return \"success\";\n  } catch (error) {\n    if (error.response) {\n      if (error.response.status === 401) {\n        return \"fail-401\";\n      }\n    } else {\n      return \"fail-network\";\n    }\n  }\n}\n\nasync function logout() {\n  try {\n    await axios.get(\"/member/logout\");\n    store.dispatch(\"deleteAuth\");\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function refreshToken() {\n  try {\n    if(store.state.authToken !== \"\") {\n      const response = await axios.get(\"/member/refreshToken\");\n      store.dispatch(\"saveAuth\", {\n        userId: response.data.mid,\n        authToken: response.data.accessToken\n      });\n      return true;\n    }\n  } catch(error) {\n    console.log(error);\n  }\n  return false;\n}\n\nexport default {\n  join,\n  login,\n  logout,\n  refreshToken\n};\n","<template>\n    <Transition name=\"modal\">\n        <div class=\"modal-mask\">\n            <div class=\"modal-wrapper\">\n                <div class=\"modal-container\" :style=\"$attrs.style\">\n                    <div class=\"modal-header\">\n                        <slot name=\"header\">default header</slot>\n                    </div>\n\n                    <div class=\"modal-body\">\n                        <slot name=\"body\">default body</slot>\n                    </div>\n\n                    <div class=\"modal-footer\">\n                        <slot name=\"footer\">\n                            default footer\n                            <button class=\"modal-default-button\" @click=\"$emit('close')\">OK</button>\n                        </slot>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </Transition>\n</template>\n\n<script>\n export default {\n     inheritAttrs: false\n }\n</script>\n\n<script setup></script>\n\n<style scoped>\n.modal-mask {\n    position: fixed;\n    z-index: 9998;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: table;\n    transition: opacity 0.3s ease;\n}\n\n.modal-wrapper {\n    display: table-cell;\n    vertical-align: middle;\n}\n\n.modal-container {\n    width: 300px;\n    margin: 0px auto;\n    padding: 20px 30px;\n    background-color: #fff;\n    border-radius: 2px;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.33);\n    transition: all 0.3s ease;\n}\n\n.modal-header h3 {\n  width: 100%;\n}\n\n.modal-body {\n    margin: 20px 0;\n}\n\n.modal-default-button {\n    float: right;\n}\n\n/*\n * The following styles are auto-applied to elements with\n * transition=\"modal\" when their visibility is toggled\n * by Vue.js.\n *\n * You can easily play with the modal transition by editing\n * these styles.\n */\n\n.modal-enter-from {\n    opacity: 0;\n}\n\n.modal-leave-to {\n    opacity: 0;\n}\n\n.modal-enter-from .modal-container,\n.modal-leave-to .modal-container {\n    -webkit-transform: scale(1.1);\n    transform: scale(1.1);\n}\n</style>\n","import { render } from \"./ModalDialogTemplate.vue?vue&type=template&id=c0d5047c&scoped=true\"\nimport script from \"./ModalDialogTemplate.vue?vue&type=script&lang=js\"\nexport * from \"./ModalDialogTemplate.vue?vue&type=script&lang=js\"\n\nimport \"./ModalDialogTemplate.vue?vue&type=style&index=0&id=c0d5047c&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/kim-yewon/photo-album/photo-album/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c0d5047c\"]])\n\nexport default __exports__","import script from \"./AlertDialog.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AlertDialog.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\n  <div>\n    <div>\n      <div>\n        <form class=\"form\" method=\"post\" action=\"${pageContext.request.contextPath}/user/login\">\n          <div class=\"logintitle\">로그인</div>\n          <div>\n            <input type=\"text\" class=\"form-control\" id=\"userId\" placeholder=\"아이디\" v-model=\"user.id\" />\n            <input type=\"password\" class=\"form-control\" placeholder=\"비밀번호\" v-model=\"user.password\" />\n\n            <!-- <c:if test=\"${error != null}\">\n              <small style=\"color: red\" id=\"loginError\">${error}</small>\n            </c:if> -->\n            <button class=\"loginbutton\" @click=\"handlelogin\">로그인</button>\n          </div>\n        </form>\n      </div>\n      <AlertDialog v-if=\"alertDialog\" :message=\"alertDialogMessage\" :loading=\"loading\" @close=\"alertDialog = false\" />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { reactive, ref } from \"vue\";\nimport apiAuth from \"@/apis/auth\";\nimport AlertDialog from \"@/components/AlertDialog.vue\";\n\nconst alertDialog = ref(false);\nconst alertDialogMessage = ref(\"\");\nconst loading = ref(false);\n\nconst user = reactive ({\n  id: \"user\",\n  password: \"12345\"\n});\n\nasync function handleLogin() {\n  alertDialog.value = true;\n  loading.value = true;\n\n  const result = await apiAuth.login(user);\n\n  if (result === \"success\") {\n    alertDialog.value = false;\n  } else if (result === \"fail-401\") {\n    alertDialogMessage.value = \"로그인 실패: 아이디 또는 패스워드가 일치하지 않습니다\";\n  } else {\n    alertDialogMessage.value = \"로그인 실패: 네트워크 에러\";\n  }\n\n  loading.value = false;\n}\n</script>\n\n<style scoped>\n.form {\n  /* position: relative; */\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  border-radius: 1em;\n  width: 28em;\n  padding: 1.5em;\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.8);\n}\n\n.logintitle {\n  text-align: center;\n  font-size: 2.5em;\n  font-weight: 400;\n}\n\n.form-control {\n  height: 2.5em;\n  box-sizing: border-box;\n  border-style: none;\n  border: 0.08em solid rgb(72, 72, 72);\n  font-size: 1.1em;\n  margin: 1em 0;\n}\n\n.loginbutton {\n  border: none;\n  color: black;\n  width: 100%;\n  height: 2.5em;\n  font-size: 1.2em;\n  border-radius: 0.5em;\n  cursor: pointer;\n}\n</style>\n","import script from \"./Login.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Login.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=4f7f167e&scoped=true&lang=css\"\n\nimport exportComponent from \"/Users/kim-yewon/photo-album/photo-album/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4f7f167e\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_2","type","id","placeholder","_ctx","$event","password","onClick","_createBlock","_component_AlertDialog","message","loading","onClose","script","__exports__","render","_Transition","name","style","_renderSlot","inheritAttrs","alertDialog","ref","alertDialogMessage","user","reactive"],"sourceRoot":""}